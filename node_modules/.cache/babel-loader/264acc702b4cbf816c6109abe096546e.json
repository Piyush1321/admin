{"ast":null,"code":"var _jsxFileName = \"/Users/ishwarbaisla/Documents/GitHub/admin/src/components/ViewExams.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport LoaderHeading from './util/LoaderHeading';\nimport ExamCard from './util/ExamCard';\nimport PageNavigateButton from './util/PageNavigateButton';\nimport ViewExamHeaderOptions from './util/ViewExamHeaderOptions';\nimport ExamTableRow from './util/exams/ExamTableRow';\nimport WrapperFooter from './util/WrapperFooter';\nimport WrapperHeader from './util/WrapperHeader';\nimport Request from './services/Request';\nimport Flash from './services/Flash';\nimport Loader from './util/Loader';\nimport ConfirmationDialogWithInput from './util/ConfirmationDialogWithInput';\nimport Sections from './util/section/Sections';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ViewExams() {\n  _s();\n\n  const [load, setLoad] = useState(false);\n  const [examDetails, setExamDetails] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n  const [sectionDetails, setSectionDetails] = useState([]);\n  const [examTitle, setExamTitle] = useState('');\n\n  const fetchDetails = () => {\n    setLoad(false);\n    let url = \"http://localhost:8080/QuizWit/ViewExams?page=\";\n    url += currentPage;\n    let limit = 5;\n    let temp = localStorage.getItem(\"perPageExams\");\n\n    if (temp == null) {\n      localStorage.setItem(\"perPageExams\", 5);\n    } else {\n      try {\n        parseInt(temp);\n      } catch (e) {\n        Flash.message(\"bg-danger\", \"Render exams per page in view exams must be a number\");\n        return;\n      }\n\n      limit = temp;\n    }\n\n    url += \"&limit=\" + limit;\n    Request.get(url).then(res => {\n      if (res.success) {\n        setLoad(true);\n        let details = res.examDetails;\n        setTotalPages(res.totalPages);\n        setCurrentPage(res.currentPage);\n\n        for (let i = 0; i < details.length; i++) {\n          details[i][\"serialNo\"] = i + 1;\n        }\n\n        setExamDetails(details);\n      } else {\n        Flash.message(res.error, 'bg-danger');\n      }\n    });\n  };\n\n  const nextPage = () => {\n    if (currentPage < totalPages) setCurrentPage(currentPage + 1);\n  };\n\n  const prevPage = () => {\n    if (currentPage > 1) setCurrentPage(currentPage - 1);\n  };\n\n  const getSelectedExam = () => {\n    let exams = document.getElementsByName('examId');\n    let examNames = document.getElementsByClassName('exam-title-value');\n\n    for (let i = 0; i < exams.length; i++) {\n      if (exams[i].checked) return {\n        examId: exams[i].value,\n        examTitle: examNames[i].innerText\n      };\n    }\n\n    return null;\n  };\n\n  const showDeleteExamDialog = () => {\n    let deleteMeInput = document.getElementById('delete-me');\n    let permanentlyDeleteInput = document.getElementById('permanently-delete');\n    deleteMeInput.value = '';\n    permanentlyDeleteInput.checked = false;\n    let obj = getSelectedExam();\n\n    if (obj) {\n      document.getElementById('delete-exam-title').innerText = obj.examTitle;\n      document.getElementById('route-overlay').style.display = 'block';\n      document.getElementById('confirmation-dialog-with-input').style.display = 'block';\n    } else {\n      Flash.message('Select an exam', 'bg-secondary');\n    }\n  };\n\n  const hideDeleteExamDialog = () => {\n    document.getElementById('confirmation-dialog-with-input').style.display = 'none';\n    document.getElementById('route-overlay').style.display = 'none';\n  };\n\n  const deleteExam = () => {\n    let obj = getSelectedExam();\n    let deleteMeInput = document.getElementById('delete-me');\n    let permanentlyDeleteInput = document.getElementById('permanently-delete');\n    let permanentlyDelete = permanentlyDeleteInput.checked ? 1 : 0;\n\n    if (obj) {\n      let examId = obj.examId;\n      let data = {\n        examId,\n        permanentlyDelete\n      };\n\n      if (deleteMeInput.value == 'DELETE ME') {\n        let url = \"http://localhost:8080/QuizWit/DeleteExam\";\n        Request.post(url, data).then(res => {\n          if (res.success) {\n            Flash.message(res.success, 'bg-success');\n            hideDeleteExamDialog();\n            fetchDetails();\n          } else {\n            Flash.message(res.error, 'bg-danger');\n          }\n        });\n      } else {\n        Flash.message('Please write DELETE ME in input box to delete exam', 'bg-secondary');\n      }\n    } else {\n      Flash.message('Select an exam', 'bg-secondary');\n    }\n  };\n\n  const addSection = () => {\n    if (setExam()) {\n      let a = document.createElement('a');\n      a.href = 'add-section';\n      a.click();\n    }\n  };\n\n  const editExam = () => {\n    if (setExam()) {\n      let a = document.createElement('a');\n      a.href = 'edit-exam';\n      a.click();\n    }\n  };\n\n  const setExam = () => {\n    let obj = getSelectedExam();\n\n    if (obj) {\n      localStorage.setItem('examId', obj.examId);\n      localStorage.setItem('examTitle', obj.examTitle);\n      return true;\n    } else {\n      Flash.message('Select an exam', 'bg-secondary');\n      return false;\n    }\n  };\n\n  const fetchSections = () => {\n    setSectionDetails([]);\n  };\n\n  const viewSections = () => {\n    let obj = getSelectedExam();\n\n    if (obj) {\n      setExamTitle(obj.examTitle);\n      fetchSections();\n      if (sectionDetails) document.getElementById('route-overlay').style.display = 'block';\n      document.getElementById('sections-dialog').style.display = 'flex';\n    } else {\n      Flash.message('Select an exam', 'bg-secondary');\n    }\n  };\n\n  useEffect(() => {\n    document.getElementById('route-overlay').style.display = 'none';\n  }, []);\n  useEffect(() => {\n    fetchDetails();\n  }, [currentPage]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(WrapperHeader, {\n      heading: \"Exams\",\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-row jc-e\",\n        children: examDetails.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary btn-small ml-10\",\n            onClick: addSection,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-plus mr-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 33\n            }, this), \"Add Section\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary btn-small ml-10\",\n            onClick: viewSections,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-box mr-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 33\n            }, this), \"View Sections\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-tertiary btn-small ml-10\",\n            onClick: editExam,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-pen mr-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 33\n            }, this), \"Edit\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger btn-small ml-10\",\n            onClick: showDeleteExamDialog,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-trash mr-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 33\n            }, this), \"Delete\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true) : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-loaded\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [!load && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 28\n        }, this), load && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-container\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"S No.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Exam Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Visibility\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Start Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Created On\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"select-exam-radio-container\",\n                  children: \"Select\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: examDetails.map((d, k) => {\n                return /*#__PURE__*/_jsxDEV(ExamTableRow, {\n                  examId: d.examId,\n                  serialNo: d.serialNo,\n                  title: d.title,\n                  visibility: d.private,\n                  startTime: d.startTime,\n                  status: d.isActive,\n                  createdOn: d.timestamp,\n                  fetchDetails: fetchDetails\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 48\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"exam-page-navigation-btns-padding\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmationDialogWithInput, {\n      operation: deleteExam\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Sections, {\n      sections: sectionDetails,\n      examTitle: examTitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(WrapperFooter, {\n      heading: \"\",\n      render: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-row jc-sb flex-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"prev-btn\",\n          className: \"btn btn-dark btn-small\",\n          onClick: prevPage,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn btn-dark btn-small ml-10\",\n          children: currentPage + '/' + totalPages\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"next-btn\",\n          className: \"btn btn-primary btn-small\",\n          onClick: nextPage,\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ViewExams, \"BssC0Bd8RJy1v20LToNy2LyQ13k=\");\n\n_c = ViewExams;\nexport default ViewExams;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewExams\");","map":{"version":3,"sources":["/Users/ishwarbaisla/Documents/GitHub/admin/src/components/ViewExams.js"],"names":["React","useState","useEffect","LoaderHeading","ExamCard","PageNavigateButton","ViewExamHeaderOptions","ExamTableRow","WrapperFooter","WrapperHeader","Request","Flash","Loader","ConfirmationDialogWithInput","Sections","ViewExams","load","setLoad","examDetails","setExamDetails","currentPage","setCurrentPage","totalPages","setTotalPages","sectionDetails","setSectionDetails","examTitle","setExamTitle","fetchDetails","url","limit","temp","localStorage","getItem","setItem","parseInt","e","message","get","then","res","success","details","i","length","error","nextPage","prevPage","getSelectedExam","exams","document","getElementsByName","examNames","getElementsByClassName","checked","examId","value","innerText","showDeleteExamDialog","deleteMeInput","getElementById","permanentlyDeleteInput","obj","style","display","hideDeleteExamDialog","deleteExam","permanentlyDelete","data","post","addSection","setExam","a","createElement","href","click","editExam","fetchSections","viewSections","map","d","k","serialNo","title","private","startTime","isActive","timestamp"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useState, useEffect } from 'react';\nimport LoaderHeading from './util/LoaderHeading';\nimport ExamCard from './util/ExamCard';\nimport PageNavigateButton from './util/PageNavigateButton';\nimport ViewExamHeaderOptions from './util/ViewExamHeaderOptions';\nimport ExamTableRow from './util/exams/ExamTableRow';\nimport WrapperFooter from './util/WrapperFooter';\nimport WrapperHeader from './util/WrapperHeader';\nimport Request from './services/Request';\nimport Flash from './services/Flash';\nimport Loader from './util/Loader';\nimport ConfirmationDialogWithInput from './util/ConfirmationDialogWithInput';\nimport Sections from './util/section/Sections';\n\nfunction ViewExams() {\n    const [load, setLoad] = useState(false);\n    const [examDetails, setExamDetails] = useState([]);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(0);\n    const [sectionDetails, setSectionDetails] = useState([]);\n    const [examTitle ,setExamTitle] = useState('');\n\n    const fetchDetails = () => {\n        setLoad(false);\n        let url = \"http://localhost:8080/QuizWit/ViewExams?page=\";\n        url += currentPage;\n        let limit = 5;\n        let temp = localStorage.getItem(\"perPageExams\");\n        if(temp == null) {\n            localStorage.setItem(\"perPageExams\", 5);\n\n        }\n        else {\n            try {\n                parseInt(temp);\n            } catch(e) {\n                Flash.message(\"bg-danger\", \"Render exams per page in view exams must be a number\");\n                return;\n            }\n            limit = temp;\n        }\n        url += \"&limit=\" + limit;\n        Request.get(url)\n        .then((res) => {\n            if(res.success) {\n                setLoad(true);\n                let details = res.examDetails;\n                setTotalPages(res.totalPages);\n                setCurrentPage(res.currentPage);\n                for(let i=0; i<details.length; i++) {\n                    details[i][\"serialNo\"] = i+1;\n                }\n                setExamDetails(details);\n            }\n            else {\n                Flash.message(res.error, 'bg-danger');\n            }\n        }) \n    }\n\n    const nextPage = () => {\n        if(currentPage < totalPages)\n        setCurrentPage(currentPage + 1);\n    }\n\n    const prevPage = () => {\n        if(currentPage > 1)\n            setCurrentPage(currentPage - 1);\n    }\n\n    const getSelectedExam = () => {\n        let exams = document.getElementsByName('examId');\n        let examNames = document.getElementsByClassName('exam-title-value');\n        for(let i=0; i<exams.length; i++) {\n            if(exams[i].checked)\n                return {\n                    examId: exams[i].value,\n                    examTitle: examNames[i].innerText\n                }\n        }\n        return null;\n    }\n\n    const showDeleteExamDialog = () => {\n        let deleteMeInput = document.getElementById('delete-me');\n        let permanentlyDeleteInput = document.getElementById('permanently-delete');\n        deleteMeInput.value = '';\n        permanentlyDeleteInput.checked = false;\n        let obj = getSelectedExam();\n        if(obj) {\n            document.getElementById('delete-exam-title').innerText = obj.examTitle;\n            document.getElementById('route-overlay').style.display = 'block';\n            document.getElementById('confirmation-dialog-with-input').style.display = 'block';\n        }\n        else {\n            Flash.message('Select an exam', 'bg-secondary');\n        }\n    }\n\n    const hideDeleteExamDialog = () => {\n        document.getElementById('confirmation-dialog-with-input').style.display = 'none';\n        document.getElementById('route-overlay').style.display = 'none';\n    }\n\n\n    const deleteExam = () => {\n        let obj = getSelectedExam();\n        let deleteMeInput = document.getElementById('delete-me');\n        let permanentlyDeleteInput = document.getElementById('permanently-delete');\n        let permanentlyDelete = permanentlyDeleteInput.checked ? 1 : 0;\n        if(obj) {\n            let examId = obj.examId;\n            let data = {\n                examId,\n                permanentlyDelete\n            }\n            if(deleteMeInput.value == 'DELETE ME') {\n                let url = \"http://localhost:8080/QuizWit/DeleteExam\";\n                Request.post(url, data)\n                .then((res) => {\n                    if(res.success) {\n                        Flash.message(res.success, 'bg-success');\n                        hideDeleteExamDialog();\n                        fetchDetails();\n                    }\n                    else {\n                        Flash.message(res.error, 'bg-danger');\n                    }\n                })\n            }\n            else {\n                Flash.message('Please write DELETE ME in input box to delete exam', 'bg-secondary');\n            }\n        }\n        else {\n            Flash.message('Select an exam', 'bg-secondary');\n        }\n         \n    }\n\n    const addSection = () => {\n        if(setExam()) {\n            let a = document.createElement('a');\n            a.href = 'add-section';\n            a.click();\n        }\n    }\n\n    const editExam = () => {\n        if(setExam()) {\n            let a = document.createElement('a');\n            a.href = 'edit-exam';\n            a.click();\n        }\n    }\n\n    const setExam = () => {\n        let obj = getSelectedExam();\n        if(obj) {\n            localStorage.setItem('examId', obj.examId);\n            localStorage.setItem('examTitle', obj.examTitle);\n            return true;\n        }\n        else {\n            Flash.message('Select an exam', 'bg-secondary');\n            return false;\n        }\n    }\n\n    const fetchSections = () => {\n        setSectionDetails([])\n\n    }\n\n    const viewSections = () => {\n        let obj = getSelectedExam();\n        if(obj) {\n            setExamTitle(obj.examTitle);\n            fetchSections();\n            if(sectionDetails)\n            document.getElementById('route-overlay').style.display = 'block';\n            document.getElementById('sections-dialog').style.display = 'flex';\n        }\n        else {\n            Flash.message('Select an exam', 'bg-secondary');\n        }\n    }\n\n    useEffect(() => {\n        document.getElementById('route-overlay').style.display = 'none';\n    }, []);\n\n    useEffect(() => {\n        fetchDetails();\n    }, [currentPage])\n    return (\n    <>\n        <WrapperHeader \n            heading='Exams'\n            component={\n                <div className='flex-row jc-e'>\n                    {\n                        examDetails.length > 0 ? \n                        <>\n                            <button  className='btn btn-primary btn-small ml-10' onClick={addSection}>\n                                <i className='fas fa-plus mr-5'></i>\n                                Add Section\n                            </button>\n                            <button className='btn btn-secondary btn-small ml-10' onClick={viewSections}>\n                                <i className='fas fa-box mr-5'></i>\n                                View Sections\n                            </button>\n                            <button className='btn btn-tertiary btn-small ml-10' onClick={editExam}>\n                                <i className='fas fa-pen mr-5'></i>\n                                Edit\n                            </button>\n                            <button className='btn btn-danger btn-small ml-10' onClick={showDeleteExamDialog}>\n                                <i className='fas fa-trash mr-5'></i>\n                                Delete\n                            </button>\n                        </>\n                        : ''\n                    }\n                </div>\n            }\n        />\n        <div className='content-loaded'>\n            <div>\n                { !load && <Loader /> }\n                { load && \n                    <div className='table-container'>\n                        <table>\n                            <thead>\n                                <tr>\n                                    <th>S No.</th>\n                                    <th>Exam Title</th>\n                                    <th>Visibility</th>\n                                    <th>Start Time</th>\n                                    <th>Status</th>\n                                    <th>Created On</th>\n                                    <th className='select-exam-radio-container'>Select</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n\n                                {\n                                    examDetails.map((d, k) => {\n                                        return <ExamTableRow \n                                            examId={d.examId}\n                                            serialNo={d.serialNo}\n                                            title={d.title}\n                                            visibility={d.private}\n                                            startTime={d.startTime}\n                                            status={d.isActive}\n                                            createdOn={d.timestamp}\n                                            fetchDetails={fetchDetails}\n                                        />\n                                    })\n                                }\n                            </tbody>\n                        </table>\n                    </div>\n                }\n                <div className='exam-page-navigation-btns-padding'></div>\n            </div>\n        </div>\n        <ConfirmationDialogWithInput \n            operation={deleteExam}\n        />\n        <Sections sections={sectionDetails} examTitle={examTitle}/>\n        <WrapperFooter\n            heading=''\n            render={\n                <div className='flex-row jc-sb flex-full'>\n                    <button id=\"prev-btn\" className='btn btn-dark btn-small' onClick={prevPage}>Previous</button>\n                    <div className='btn btn-dark btn-small ml-10'>{currentPage + '/' + totalPages}</div>\n                    <button id=\"next-btn\" className='btn btn-primary btn-small' onClick={nextPage}>Next</button>\n                </div>\n            }\n        />\n    </>\n    );\n}\n\nexport default ViewExams;\n"]},"metadata":{},"sourceType":"module"}