{"ast":null,"code":"var _jsxFileName = \"/Users/ishwarbaisla/Documents/GitHub/admin/src/components/ViewExams.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport LoaderHeading from './util/LoaderHeading';\nimport ExamCard from './util/ExamCard';\nimport PageNavigateButton from './util/PageNavigateButton';\nimport ViewExamHeaderOptions from './util/ViewExamHeaderOptions';\nimport ExamTableRow from './util/exams/ExamTableRow';\nimport WrapperFooter from './util/WrapperFooter';\nimport WrapperHeader from './util/WrapperHeader';\nimport Request from './services/Request';\nimport Flash from './services/Flash';\nimport Loader from './util/Loader';\nimport ConfirmationDialogWithInput from './util/ConfirmationDialogWithInput';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ViewExams() {\n  _s();\n\n  const [load, setLoad] = useState(false);\n  const [examDetails, setExamDetails] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n\n  const fetchDetails = () => {\n    setLoad(false);\n    let url = \"http://localhost:8080/QuizWit/ViewExams?page=\";\n    url += currentPage;\n    let limit = 5;\n    let temp = localStorage.getItem(\"perPageExams\");\n\n    if (temp == null) {\n      localStorage.setItem(\"perPageExams\", 5);\n    } else {\n      try {\n        parseInt(temp);\n      } catch (e) {\n        Flash.message(\"bg-danger\", \"Render exams per page in view exams must be a number\");\n        return;\n      }\n\n      limit = temp;\n    }\n\n    url += \"&limit=\" + limit;\n    Request.get(url).then(res => {\n      if (res.success) {\n        setLoad(true);\n        let details = res.examDetails;\n        setTotalPages(res.totalPages);\n        setCurrentPage(res.currentPage);\n\n        for (let i = 0; i < details.length; i++) {\n          details[i][\"serialNo\"] = i + 1;\n        }\n\n        setExamDetails(details);\n      } else {\n        Flash.message(res.error, 'bg-danger');\n      }\n    });\n  };\n\n  const nextPage = () => {\n    if (currentPage < totalPages) setCurrentPage(currentPage + 1);\n  };\n\n  const prevPage = () => {\n    if (currentPage > 1) setCurrentPage(currentPage - 1);\n  };\n\n  const getSelectedExam = () => {\n    let exams = document.getElementsByName('examId');\n    let examNames = document.getElementsByClassName('exam-title-value');\n\n    for (let i = 0; i < exams.length; i++) {\n      if (exams[i].checked) return {\n        examId: exams[i].value,\n        examTitle: examNames[i].innerText\n      };\n    }\n\n    return null;\n  };\n\n  const showDeleteExamDialog = () => {\n    let deleteMeInput = document.getElementById('delete-me');\n    let permanentlyDeleteInput = document.getElementById('permanently-delete');\n    deleteMeInput.value = '';\n    permanentlyDeleteInput.checked = false;\n    let obj = getSelectedExam();\n\n    if (obj) {\n      document.getElementById('delete-exam-title').innerText = obj.examTitle;\n      document.getElementById('route-overlay').style.display = 'block';\n      document.getElementById('confirmation-dialog-with-input').style.display = 'block';\n    } else {\n      Flash.message('Select an exam', 'bg-secondary');\n    }\n  };\n\n  const hideDeleteExamDialog = () => {\n    document.getElementById('confirmation-dialog-with-input').style.display = 'none';\n    document.getElementById('route-overlay').style.display = 'none';\n  };\n\n  const deleteExam = () => {\n    let obj = getSelectedExam();\n    let deleteMeInput = document.getElementById('delete-me');\n    let permanentlyDeleteInput = document.getElementById('permanently-delete');\n    let permanentlyDelete = permanentlyDeleteInput.checked ? 1 : 0;\n\n    if (obj) {\n      let examId = obj.examId;\n      let data = {\n        examId,\n        permanentlyDelete\n      };\n\n      if (deleteMeInput.value == 'DELETE ME') {\n        let url = \"http://localhost:8080/QuizWit/DeleteExam\";\n        Request.post(url, data).then(res => {\n          if (res.success) {\n            Flash.message(res.success, 'bg-success');\n            hideDeleteExamDialog();\n            fetchDetails();\n          } else {\n            Flash.message(res.error, 'bg-danger');\n          }\n        });\n      } else {\n        Flash.message('Please write DELETE ME in input box to delete exam', 'bg-secondary');\n      }\n    } else {\n      Flash.message('Select an exam', 'bg-secondary');\n    }\n  };\n\n  const addSection = () => {\n    if (setExam()) {\n      let a = document.createElement('a');\n      a.href = 'add-section';\n      a.click();\n    }\n  };\n\n  const editExam = () => {\n    if (setExam()) {\n      let a = document.createElement('a');\n      a.href = 'edit-exam';\n      a.click();\n    }\n  };\n\n  const setExam = () => {\n    let obj = getSelectedExam();\n\n    if (obj) {\n      localStorage.setItem('examId', obj.examId);\n      localStorage.setItem('examTitle', obj.examTitle);\n      return true;\n    } else {\n      Flash.message('Select an exam', 'bg-secondary');\n      return false;\n    }\n  };\n\n  useEffect(() => {\n    document.getElementById('route-overlay').style.display = 'none';\n  }, []);\n  useEffect(() => {\n    fetchDetails();\n  }, [currentPage]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(WrapperHeader, {\n      heading: \"Exams\",\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-row jc-e\",\n        children: examDetails.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary btn-small ml-10\",\n            onClick: addSection,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-plus mr-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 33\n            }, this), \"Add Section\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-tertiary btn-small ml-10\",\n            onClick: editExam,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-pen mr-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 33\n            }, this), \"Edit\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary btn-small ml-10\",\n            onClick: viewSections\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger btn-small ml-10\",\n            onClick: showDeleteExamDialog,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-trash mr-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 33\n            }, this), \"Delete\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true) : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-loaded\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [!load && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 28\n        }, this), load && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-container\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"S No.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Exam Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Visibility\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Start Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Created On\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"select-exam-radio-container\",\n                  children: \"Select\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: examDetails.map((d, k) => {\n                return /*#__PURE__*/_jsxDEV(ExamTableRow, {\n                  examId: d.examId,\n                  serialNo: d.serialNo,\n                  title: d.title,\n                  visibility: d.private,\n                  startTime: d.startTime,\n                  status: d.isActive,\n                  createdOn: d.timestamp,\n                  fetchDetails: fetchDetails\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 48\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"exam-page-navigation-btns-padding\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmationDialogWithInput, {\n      operation: deleteExam\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(WrapperFooter, {\n      heading: \"\",\n      render: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-row jc-sb flex-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"prev-btn\",\n          className: \"btn btn-dark btn-small\",\n          onClick: prevPage,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn btn-dark btn-small ml-10\",\n          children: currentPage + '/' + totalPages\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"next-btn\",\n          className: \"btn btn-primary btn-small\",\n          onClick: nextPage,\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ViewExams, \"c57HKV/WHU6lYscCykO6CmiSji8=\");\n\n_c = ViewExams;\nexport default ViewExams;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewExams\");","map":{"version":3,"sources":["/Users/ishwarbaisla/Documents/GitHub/admin/src/components/ViewExams.js"],"names":["React","useState","useEffect","LoaderHeading","ExamCard","PageNavigateButton","ViewExamHeaderOptions","ExamTableRow","WrapperFooter","WrapperHeader","Request","Flash","Loader","ConfirmationDialogWithInput","ViewExams","load","setLoad","examDetails","setExamDetails","currentPage","setCurrentPage","totalPages","setTotalPages","fetchDetails","url","limit","temp","localStorage","getItem","setItem","parseInt","e","message","get","then","res","success","details","i","length","error","nextPage","prevPage","getSelectedExam","exams","document","getElementsByName","examNames","getElementsByClassName","checked","examId","value","examTitle","innerText","showDeleteExamDialog","deleteMeInput","getElementById","permanentlyDeleteInput","obj","style","display","hideDeleteExamDialog","deleteExam","permanentlyDelete","data","post","addSection","setExam","a","createElement","href","click","editExam","viewSections","map","d","k","serialNo","title","private","startTime","isActive","timestamp"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useState, useEffect } from 'react';\nimport LoaderHeading from './util/LoaderHeading';\nimport ExamCard from './util/ExamCard';\nimport PageNavigateButton from './util/PageNavigateButton';\nimport ViewExamHeaderOptions from './util/ViewExamHeaderOptions';\nimport ExamTableRow from './util/exams/ExamTableRow';\nimport WrapperFooter from './util/WrapperFooter';\nimport WrapperHeader from './util/WrapperHeader';\nimport Request from './services/Request';\nimport Flash from './services/Flash';\nimport Loader from './util/Loader';\nimport ConfirmationDialogWithInput from './util/ConfirmationDialogWithInput';\n\nfunction ViewExams() {\n    const [load, setLoad] = useState(false);\n    const [examDetails, setExamDetails] = useState([]);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(0);\n\n    const fetchDetails = () => {\n        setLoad(false);\n        let url = \"http://localhost:8080/QuizWit/ViewExams?page=\";\n        url += currentPage;\n        let limit = 5;\n        let temp = localStorage.getItem(\"perPageExams\");\n        if(temp == null) {\n            localStorage.setItem(\"perPageExams\", 5);\n\n        }\n        else {\n            try {\n                parseInt(temp);\n            } catch(e) {\n                Flash.message(\"bg-danger\", \"Render exams per page in view exams must be a number\");\n                return;\n            }\n            limit = temp;\n        }\n        url += \"&limit=\" + limit;\n        Request.get(url)\n        .then((res) => {\n            if(res.success) {\n                setLoad(true);\n                let details = res.examDetails;\n                setTotalPages(res.totalPages);\n                setCurrentPage(res.currentPage);\n                for(let i=0; i<details.length; i++) {\n                    details[i][\"serialNo\"] = i+1;\n                }\n                setExamDetails(details);\n            }\n            else {\n                Flash.message(res.error, 'bg-danger');\n            }\n        }) \n    }\n\n    const nextPage = () => {\n        if(currentPage < totalPages)\n        setCurrentPage(currentPage + 1);\n    }\n\n    const prevPage = () => {\n        if(currentPage > 1)\n            setCurrentPage(currentPage - 1);\n    }\n\n    const getSelectedExam = () => {\n        let exams = document.getElementsByName('examId');\n        let examNames = document.getElementsByClassName('exam-title-value');\n        for(let i=0; i<exams.length; i++) {\n            if(exams[i].checked)\n                return {\n                    examId: exams[i].value,\n                    examTitle: examNames[i].innerText\n                }\n        }\n        return null;\n    }\n\n    const showDeleteExamDialog = () => {\n        let deleteMeInput = document.getElementById('delete-me');\n        let permanentlyDeleteInput = document.getElementById('permanently-delete');\n        deleteMeInput.value = '';\n        permanentlyDeleteInput.checked = false;\n        let obj = getSelectedExam();\n        if(obj) {\n            document.getElementById('delete-exam-title').innerText = obj.examTitle;\n            document.getElementById('route-overlay').style.display = 'block';\n            document.getElementById('confirmation-dialog-with-input').style.display = 'block';\n        }\n        else {\n            Flash.message('Select an exam', 'bg-secondary');\n        }\n    }\n\n    const hideDeleteExamDialog = () => {\n        document.getElementById('confirmation-dialog-with-input').style.display = 'none';\n        document.getElementById('route-overlay').style.display = 'none';\n    }\n\n\n    const deleteExam = () => {\n        let obj = getSelectedExam();\n        let deleteMeInput = document.getElementById('delete-me');\n        let permanentlyDeleteInput = document.getElementById('permanently-delete');\n        let permanentlyDelete = permanentlyDeleteInput.checked ? 1 : 0;\n        if(obj) {\n            let examId = obj.examId;\n            let data = {\n                examId,\n                permanentlyDelete\n            }\n            if(deleteMeInput.value == 'DELETE ME') {\n                let url = \"http://localhost:8080/QuizWit/DeleteExam\";\n                Request.post(url, data)\n                .then((res) => {\n                    if(res.success) {\n                        Flash.message(res.success, 'bg-success');\n                        hideDeleteExamDialog();\n                        fetchDetails();\n                    }\n                    else {\n                        Flash.message(res.error, 'bg-danger');\n                    }\n                })\n            }\n            else {\n                Flash.message('Please write DELETE ME in input box to delete exam', 'bg-secondary');\n            }\n        }\n        else {\n            Flash.message('Select an exam', 'bg-secondary');\n        }\n         \n    }\n\n    const addSection = () => {\n        if(setExam()) {\n            let a = document.createElement('a');\n            a.href = 'add-section';\n            a.click();\n        }\n    }\n\n    const editExam = () => {\n        if(setExam()) {\n            let a = document.createElement('a');\n            a.href = 'edit-exam';\n            a.click();\n        }\n    }\n\n    const setExam = () => {\n        let obj = getSelectedExam();\n        if(obj) {\n            localStorage.setItem('examId', obj.examId);\n            localStorage.setItem('examTitle', obj.examTitle);\n            return true;\n        }\n        else {\n            Flash.message('Select an exam', 'bg-secondary');\n            return false;\n        }\n    }\n    useEffect(() => {\n        document.getElementById('route-overlay').style.display = 'none';\n    }, []);\n\n    useEffect(() => {\n        fetchDetails();\n    }, [currentPage])\n    return (\n    <>\n        <WrapperHeader \n            heading='Exams'\n            component={\n                <div className='flex-row jc-e'>\n                    {\n                        examDetails.length > 0 ? \n                        <>\n                            <button  className='btn btn-primary btn-small ml-10' onClick={addSection}>\n                                <i className='fas fa-plus mr-5'></i>\n                                Add Section\n                            </button>\n                            <button className='btn btn-tertiary btn-small ml-10' onClick={editExam}>\n                                <i className='fas fa-pen mr-5'></i>\n                                Edit\n                            </button>\n                            <button className='btn btn-secondary btn-small ml-10' onClick={viewSections}></button>\n                            <button className='btn btn-danger btn-small ml-10' onClick={showDeleteExamDialog}>\n                                <i className='fas fa-trash mr-5'></i>\n                                Delete\n                            </button>\n                        </>\n                        : ''\n                    }\n                </div>\n            }\n        />\n        <div className='content-loaded'>\n            <div>\n                { !load && <Loader /> }\n                { load && \n                    <div className='table-container'>\n                        <table>\n                            <thead>\n                                <tr>\n                                    <th>S No.</th>\n                                    <th>Exam Title</th>\n                                    <th>Visibility</th>\n                                    <th>Start Time</th>\n                                    <th>Status</th>\n                                    <th>Created On</th>\n                                    <th className='select-exam-radio-container'>Select</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n\n                                {\n                                    examDetails.map((d, k) => {\n                                        return <ExamTableRow \n                                            examId={d.examId}\n                                            serialNo={d.serialNo}\n                                            title={d.title}\n                                            visibility={d.private}\n                                            startTime={d.startTime}\n                                            status={d.isActive}\n                                            createdOn={d.timestamp}\n                                            fetchDetails={fetchDetails}\n                                        />\n                                    })\n                                }\n                            </tbody>\n                        </table>\n                    </div>\n                }\n                <div className='exam-page-navigation-btns-padding'></div>\n            </div>\n        </div>\n        <ConfirmationDialogWithInput \n            operation={deleteExam}\n        />\n        <WrapperFooter\n            heading=''\n            render={\n                <div className='flex-row jc-sb flex-full'>\n                    <button id=\"prev-btn\" className='btn btn-dark btn-small' onClick={prevPage}>Previous</button>\n                    <div className='btn btn-dark btn-small ml-10'>{currentPage + '/' + totalPages}</div>\n                    <button id=\"next-btn\" className='btn btn-primary btn-small' onClick={nextPage}>Next</button>\n                </div>\n            }\n        />\n    </>\n    );\n}\n\nexport default ViewExams;\n"]},"metadata":{},"sourceType":"module"}