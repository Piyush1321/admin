{"ast":null,"code":"var _jsxFileName = \"/Users/ishwarbaisla/Documents/GitHub/admin/src/components/ViewExams.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport ExamTableRow from './util/exams/ExamTableRow';\nimport WrapperFooter from './util/WrapperFooter';\nimport WrapperHeader from './util/WrapperHeader';\nimport Request from './services/Request';\nimport Flash from './services/Flash';\nimport Loader from './util/Loader';\nimport ConfirmationDialogWithInput from './util/ConfirmationDialogWithInput';\nimport Sections from './util/section/Sections';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ViewExams() {\n  _s();\n\n  const getCurrentPageFromCookie = () => {\n    let cp = localStorage.getItem(\"CreatedExam\");\n\n    if (cp != null) {\n      return 1;\n    }\n\n    return localStorage.getItem('ViewExamPage') != null ? parseInt(localStorage.getItem('ViewExamPage')) : 1;\n  };\n\n  const [load, setLoad] = useState(false);\n  const [load2, setLoad2] = useState(true);\n  const [examDetails, setExamDetails] = useState([]);\n  const [currentPage, setCurrentPage] = useState(getCurrentPageFromCookie());\n  const [totalPages, setTotalPages] = useState(0);\n  const [sectionDetails, setSectionDetails] = useState([]);\n  const [examTitle, setExamTitle] = useState('');\n\n  const fetchDetails = () => {\n    setLoad(false);\n    let url = \"http://localhost:8080/QuizWit/ViewExams?page=\";\n    url += currentPage;\n    let limit = 5;\n    let temp = localStorage.getItem(\"perPageExams\");\n\n    if (temp == null) {\n      localStorage.setItem(\"perPageExams\", 5);\n    } else {\n      try {\n        parseInt(temp);\n      } catch (e) {\n        Flash.message(\"bg-danger\", \"Render exams per page in view exams must be a number\");\n        return;\n      }\n\n      limit = temp;\n    }\n\n    url += \"&limit=\" + limit;\n    Request.get(url).then(res => {\n      console.log(url);\n\n      if (res.success) {\n        console.log(res);\n        setLoad(true);\n        let details = res.examDetails;\n        setTotalPages(res.totalPages);\n        setCurrentPage(res.currentPage);\n\n        for (let i = 0; i < details.length; i++) {\n          details[i][\"serialNo\"] = i + 1;\n        }\n\n        setExamDetails(details);\n        loadAddedSection();\n        loadUpdatedSection();\n        localStorage.removeItem(\"CreatedExam\");\n      } else {\n        Flash.message(res.error, 'bg-danger');\n      }\n    });\n  };\n\n  const nextPage = () => {\n    if (currentPage < totalPages) {\n      localStorage.setItem(\"ViewExamPage\", currentPage + 1);\n      setCurrentPage(currentPage + 1);\n    }\n  };\n\n  const prevPage = () => {\n    if (currentPage > 1) {\n      localStorage.setItem(\"ViewExamPage\", currentPage - 1);\n      setCurrentPage(currentPage - 1);\n    }\n  };\n\n  const getSelectedExam = () => {\n    let exams = document.getElementsByName('examId');\n    let examNames = document.getElementsByClassName('exam-title-value');\n\n    for (let i = 0; i < exams.length; i++) {\n      if (exams[i].checked) return {\n        examId: exams[i].value,\n        examTitle: examNames[i].innerText\n      };\n    }\n\n    return null;\n  };\n\n  const showDeleteExamDialog = () => {\n    let deleteMeInput = document.getElementById('delete-me');\n    let permanentlyDeleteInput = document.getElementById('permanently-delete');\n    deleteMeInput.value = '';\n    permanentlyDeleteInput.checked = false;\n    let obj = getSelectedExam();\n\n    if (obj) {\n      document.getElementById('delete-exam-title').innerText = obj.examTitle;\n      document.getElementById('route-overlay').style.display = 'block';\n      document.getElementById('confirmation-dialog-with-input').style.display = 'block';\n    } else {\n      Flash.message('Select an exam', 'bg-secondary');\n    }\n  };\n\n  const hideDeleteExamDialog = () => {\n    document.getElementById('confirmation-dialog-with-input').style.display = 'none';\n    document.getElementById('route-overlay').style.display = 'none';\n  };\n\n  const deleteExam = () => {\n    let obj = getSelectedExam();\n    let deleteMeInput = document.getElementById('delete-me');\n    let permanentlyDeleteInput = document.getElementById('permanently-delete');\n    let permanentlyDelete = permanentlyDeleteInput.checked ? 1 : 0;\n\n    if (obj) {\n      let examId = obj.examId;\n      let data = {\n        examId,\n        permanentlyDelete\n      };\n\n      if (deleteMeInput.value == 'DELETE ME') {\n        let url = \"http://localhost:8080/QuizWit/DeleteExam\";\n        Request.post(url, data).then(res => {\n          if (res.success) {\n            Flash.message(res.success, 'bg-success');\n            hideDeleteExamDialog();\n            fetchDetails();\n          } else {\n            Flash.message(res.error, 'bg-danger');\n          }\n        });\n      } else {\n        Flash.message('Please write DELETE ME in input box to delete exam', 'bg-secondary');\n      }\n    } else {\n      Flash.message('Select an exam', 'bg-secondary');\n    }\n  };\n\n  const addSection = () => {\n    if (setExam()) {\n      let a = document.createElement('a');\n      a.href = 'add-section';\n      a.click();\n    }\n  };\n\n  const editExam = () => {\n    if (setExam()) {\n      let a = document.createElement('a');\n      a.href = 'edit-exam';\n      a.click();\n    }\n  };\n\n  const setExam = () => {\n    let obj = getSelectedExam();\n\n    if (obj) {\n      localStorage.setItem('examId', obj.examId);\n      localStorage.setItem('examTitle', obj.examTitle);\n      return true;\n    } else {\n      Flash.message('Select an exam', 'bg-secondary');\n      return false;\n    }\n  };\n\n  const fetchSections = () => {\n    let obj = getSelectedExam();\n\n    if (obj) {\n      setLoad2(false);\n      document.getElementById('route-overlay').style.display = 'block';\n      let url = \"http://localhost:8080/QuizWit/ViewSections?examId=\";\n      url += obj.examId;\n      Request.get(url).then(res => {\n        if (res.success) {\n          let details = res.sectionDetails;\n\n          for (let i = 0; i < details.length; i++) details[i][\"serialNo\"] = i + 1;\n\n          setSectionDetails(details);\n          setLoad2(true);\n          document.getElementById('route-overlay').style.display = 'none';\n\n          if (details.length == 0) {\n            Flash.message(\"Exam doesn't contain any section to show\", \"bg-primary\");\n          } else {\n            document.getElementById('route-overlay').style.display = 'block';\n            document.getElementById('sections-dialog').style.display = 'flex';\n          }\n        }\n      });\n    } else {\n      Flash.message('Select an exam', 'bg-secondary');\n      return false;\n    }\n  };\n\n  const viewSections = () => {\n    let obj = getSelectedExam();\n\n    if (obj) {\n      setExamTitle(obj.examTitle);\n      fetchSections();\n    } else {\n      Flash.message('Select an exam', 'bg-secondary');\n    }\n  };\n\n  const loadAddedSection = () => {\n    let ce = localStorage.getItem(\"SectionAdded\");\n\n    if (ce) {\n      let ei = document.getElementsByName('examId');\n      let control = false;\n\n      for (let i = 0; i < ei.length; i++) {\n        if (ei[i].value == ce) {\n          ei[i].checked = true;\n          control = true;\n          break;\n        }\n      }\n\n      if (control) viewSections();\n      localStorage.setItem(\"SectionAdded\", null);\n    }\n  };\n\n  const loadUpdatedSection = () => {\n    let ce = localStorage.getItem(\"SectionUpdated\");\n\n    if (ce) {\n      let ei = document.getElementsByName('examId');\n      let control = false;\n\n      for (let i = 0; i < ei.length; i++) {\n        if (ei[i].value == ce) {\n          ei[i].checked = true;\n          control = true;\n          break;\n        }\n      }\n\n      if (control) viewSections();\n      localStorage.setItem(\"SectionUpdated\", null);\n    }\n  };\n\n  const createExam = () => {\n    document.getElementById('create-exam-nav-link').click();\n  };\n\n  useEffect(() => {\n    document.getElementById('route-overlay').style.display = 'none';\n  }, []);\n  useEffect(() => {\n    fetchDetails();\n  }, [currentPage]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(WrapperHeader, {\n      heading: \"Exams\",\n      component: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-row jc-e\",\n        children: [examDetails.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"add-section-btn\",\n            className: \"btn btn-primary btn-small ml-10\",\n            onClick: addSection,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-plus mr-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 33\n            }, this), \"Add Section\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary btn-small ml-10\",\n            onClick: viewSections,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-box mr-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 33\n            }, this), \"View Sections\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-tertiary btn-small ml-10\",\n            onClick: editExam,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-pen mr-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 33\n            }, this), \"Edit\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger btn-small ml-10\",\n            onClick: showDeleteExamDialog,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-trash mr-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 33\n            }, this), \"Delete\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true) : '', examDetails.length == 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary btn-small\",\n            onClick: createExam,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-plus mr-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 33\n            }, this), \"Create Exam\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-loaded\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [!examDetails.length && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"primary\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            style: {\n              \"listStyle\": \"decimal\",\n              \"marginLeft\": \"20px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Create a Exam.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Add Section in exam.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Choose question from templates.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Add Question in sections.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 44\n        }, this), !load && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 28\n        }, this), load && examDetails.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-container\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"S No.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Exam Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Visibility\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Start Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: [\"Section \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 49\n                  }, this), \" Navigation\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Exam Timer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Time Duration\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Created On\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"select-exam-radio-container\",\n                  children: \"Select\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: examDetails.map((d, k) => {\n                return /*#__PURE__*/_jsxDEV(ExamTableRow, {\n                  examId: d.examId,\n                  serialNo: d.serialNo,\n                  title: d.title,\n                  visibility: d.private,\n                  startTime: d.startTime,\n                  status: d.isActive,\n                  createdOn: d.timestamp,\n                  sectionNavigation: d.sectionNavigation,\n                  examTimer: d.setEntireExamTimer,\n                  timeDuration: d.timeDuration,\n                  fetchDetails: fetchDetails\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 48\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"exam-page-navigation-btns-padding\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmationDialogWithInput, {\n      operation: deleteExam\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 9\n    }, this), load2 && /*#__PURE__*/_jsxDEV(Sections, {\n      sections: sectionDetails,\n      examTitle: examTitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 22\n    }, this), !load2 && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(WrapperFooter, {\n      heading: \"\",\n      render: examDetails.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-row jc-sb flex-full\",\n        children: [currentPage > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"prev-btn\",\n          className: \"btn btn-dark btn-small\",\n          onClick: prevPage,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 25\n        }, this), currentPage == 1 && /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn btn-dark btn-small ml-10\",\n          children: currentPage + '/' + totalPages\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 21\n        }, this), currentPage < totalPages && /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"next-btn\",\n          className: \"btn btn-primary btn-small\",\n          onClick: nextPage,\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 25\n        }, this), currentPage]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ViewExams, \"TJkawR7VMtUBCv64vfpjclUVm3Q=\");\n\n_c = ViewExams;\nexport default ViewExams;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewExams\");","map":{"version":3,"sources":["/Users/ishwarbaisla/Documents/GitHub/admin/src/components/ViewExams.js"],"names":["React","useState","useEffect","ExamTableRow","WrapperFooter","WrapperHeader","Request","Flash","Loader","ConfirmationDialogWithInput","Sections","ViewExams","getCurrentPageFromCookie","cp","localStorage","getItem","parseInt","load","setLoad","load2","setLoad2","examDetails","setExamDetails","currentPage","setCurrentPage","totalPages","setTotalPages","sectionDetails","setSectionDetails","examTitle","setExamTitle","fetchDetails","url","limit","temp","setItem","e","message","get","then","res","console","log","success","details","i","length","loadAddedSection","loadUpdatedSection","removeItem","error","nextPage","prevPage","getSelectedExam","exams","document","getElementsByName","examNames","getElementsByClassName","checked","examId","value","innerText","showDeleteExamDialog","deleteMeInput","getElementById","permanentlyDeleteInput","obj","style","display","hideDeleteExamDialog","deleteExam","permanentlyDelete","data","post","addSection","setExam","a","createElement","href","click","editExam","fetchSections","viewSections","ce","ei","control","createExam","map","d","k","serialNo","title","private","startTime","isActive","timestamp","sectionNavigation","setEntireExamTimer","timeDuration"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useState, useEffect } from 'react';\nimport ExamTableRow from './util/exams/ExamTableRow';\nimport WrapperFooter from './util/WrapperFooter';\nimport WrapperHeader from './util/WrapperHeader';\nimport Request from './services/Request';\nimport Flash from './services/Flash';\nimport Loader from './util/Loader';\nimport ConfirmationDialogWithInput from './util/ConfirmationDialogWithInput';\nimport Sections from './util/section/Sections';\n\nfunction ViewExams() {\n    const getCurrentPageFromCookie = () => {\n        let cp = localStorage.getItem(\"CreatedExam\");\n        if(cp != null) {\n            return 1;\n        }\n        return localStorage.getItem('ViewExamPage') != null ? parseInt(localStorage.getItem('ViewExamPage')) : 1;\n    \n    }\n    const [load, setLoad] = useState(false);\n    const [load2, setLoad2] = useState(true);\n    const [examDetails, setExamDetails] = useState([]);\n    const [currentPage, setCurrentPage] = useState(getCurrentPageFromCookie());\n    const [totalPages, setTotalPages] = useState(0);\n    const [sectionDetails, setSectionDetails] = useState([]);\n    const [examTitle ,setExamTitle] = useState('');\n\n    const fetchDetails = () => {\n        setLoad(false);\n        let url = \"http://localhost:8080/QuizWit/ViewExams?page=\";\n        url += currentPage;\n        let limit = 5;\n        let temp = localStorage.getItem(\"perPageExams\");\n        if(temp == null) {\n            localStorage.setItem(\"perPageExams\", 5);\n\n        }\n        else {\n            try {\n                parseInt(temp);\n            } catch(e) {\n                Flash.message(\"bg-danger\", \"Render exams per page in view exams must be a number\");\n                return;\n            }\n            limit = temp;\n        }\n        url += \"&limit=\" + limit;\n        Request.get(url)\n        .then((res) => {\n            console.log(url)\n            if(res.success) {\n                console.log(res);\n                setLoad(true);\n                let details = res.examDetails;\n                setTotalPages(res.totalPages);\n                setCurrentPage(res.currentPage);\n                for(let i=0; i<details.length; i++) {\n                    details[i][\"serialNo\"] = i+1;\n                }\n                setExamDetails(details);\n                loadAddedSection();\n                loadUpdatedSection();\n                localStorage.removeItem(\"CreatedExam\");\n            }\n            else {\n                Flash.message(res.error, 'bg-danger');\n            }\n        }) \n    }\n\n    const nextPage = () => {\n        if(currentPage < totalPages) {\n            localStorage.setItem(\"ViewExamPage\", currentPage + 1);\n            setCurrentPage(currentPage + 1);\n        }\n    }\n\n    const prevPage = () => {\n        if(currentPage > 1) {\n            localStorage.setItem(\"ViewExamPage\", currentPage - 1);\n            setCurrentPage(currentPage - 1);\n        }\n    }\n\n    const getSelectedExam = () => {\n        let exams = document.getElementsByName('examId');\n        let examNames = document.getElementsByClassName('exam-title-value');\n        for(let i=0; i<exams.length; i++) {\n            if(exams[i].checked)\n                return {\n                    examId: exams[i].value,\n                    examTitle: examNames[i].innerText\n                }\n        }\n        return null;\n    }\n\n    const showDeleteExamDialog = () => {\n        let deleteMeInput = document.getElementById('delete-me');\n        let permanentlyDeleteInput = document.getElementById('permanently-delete');\n        deleteMeInput.value = '';\n        permanentlyDeleteInput.checked = false;\n        let obj = getSelectedExam();\n        if(obj) {\n            document.getElementById('delete-exam-title').innerText = obj.examTitle;\n            document.getElementById('route-overlay').style.display = 'block';\n            document.getElementById('confirmation-dialog-with-input').style.display = 'block';\n        }\n        else {\n            Flash.message('Select an exam', 'bg-secondary');\n        }\n    }\n\n    const hideDeleteExamDialog = () => {\n        document.getElementById('confirmation-dialog-with-input').style.display = 'none';\n        document.getElementById('route-overlay').style.display = 'none';\n    }\n\n\n    const deleteExam = () => {\n        let obj = getSelectedExam();\n        let deleteMeInput = document.getElementById('delete-me');\n        let permanentlyDeleteInput = document.getElementById('permanently-delete');\n        let permanentlyDelete = permanentlyDeleteInput.checked ? 1 : 0;\n        if(obj) {\n            let examId = obj.examId;\n            let data = {\n                examId,\n                permanentlyDelete\n            }\n            if(deleteMeInput.value == 'DELETE ME') {\n                let url = \"http://localhost:8080/QuizWit/DeleteExam\";\n                Request.post(url, data)\n                .then((res) => {\n                    if(res.success) {\n                        Flash.message(res.success, 'bg-success');\n                        hideDeleteExamDialog();\n                        fetchDetails();\n                    }\n                    else {\n                        Flash.message(res.error, 'bg-danger');\n                    }\n                })\n            }\n            else {\n                Flash.message('Please write DELETE ME in input box to delete exam', 'bg-secondary');\n            }\n        }\n        else {\n            Flash.message('Select an exam', 'bg-secondary');\n        }\n         \n    }\n\n    const addSection = () => {\n        if(setExam()) {\n            let a = document.createElement('a');\n            a.href = 'add-section';\n            a.click();\n        }\n    }\n\n    const editExam = () => {\n        if(setExam()) {\n            let a = document.createElement('a');\n            a.href = 'edit-exam';\n            a.click();\n        }\n    }\n\n    const setExam = () => {\n        let obj = getSelectedExam();\n        if(obj) {\n            localStorage.setItem('examId', obj.examId);\n            localStorage.setItem('examTitle', obj.examTitle);\n            return true;\n        }\n        else {\n            Flash.message('Select an exam', 'bg-secondary');\n            return false;\n        }\n    }\n\n    const fetchSections = () => {\n        let obj = getSelectedExam();\n        if(obj) {\n            setLoad2(false);\n            document.getElementById('route-overlay').style.display = 'block';\n            let url = \"http://localhost:8080/QuizWit/ViewSections?examId=\";\n            url += obj.examId;\n            Request.get(url)\n            .then((res) => {\n                if(res.success) {\n                    let details = res.sectionDetails;\n                    for(let i=0; i<details.length; i++)\n                        details[i][\"serialNo\"] = i+1;\n                    setSectionDetails(details);\n                    setLoad2(true);\n                    document.getElementById('route-overlay').style.display = 'none';\n                    if(details.length == 0) {\n                        Flash.message(\"Exam doesn't contain any section to show\", \"bg-primary\");\n                    }\n                    else {\n                        document.getElementById('route-overlay').style.display = 'block';\n                        document.getElementById('sections-dialog').style.display = 'flex';\n                    }\n                }\n            })\n        }\n        else {\n            Flash.message('Select an exam', 'bg-secondary');\n            return false;\n        }\n    }\n\n    const viewSections = () => {\n        let obj = getSelectedExam();\n        if(obj) {\n            setExamTitle(obj.examTitle);\n            fetchSections();\n        }\n        else {\n            Flash.message('Select an exam', 'bg-secondary');\n        }\n    }\n\n    const loadAddedSection = () => {\n        let ce = localStorage.getItem(\"SectionAdded\");\n        if(ce) {\n            let ei = document.getElementsByName('examId');\n\n            let control = false;\n            for(let i=0; i<ei.length; i++) {\n                if(ei[i].value == ce) {\n                    ei[i].checked = true;\n                    control = true;\n                    break;\n                }\n            }\n            if(control)\n                viewSections();\n            localStorage.setItem(\"SectionAdded\", null);\n        }\n    }\n\n    const loadUpdatedSection = () => {\n        let ce = localStorage.getItem(\"SectionUpdated\");\n        if(ce) {\n            let ei = document.getElementsByName('examId');\n\n            let control = false;\n            for(let i=0; i<ei.length; i++) {\n                if(ei[i].value == ce) {\n                    ei[i].checked = true;\n                    control = true;\n                    break;\n                }\n            }\n            if(control)\n                viewSections();\n            localStorage.setItem(\"SectionUpdated\", null);\n        }\n    }\n\n\n    const createExam = () => {\n        document.getElementById('create-exam-nav-link').click();\n    }\n\n    useEffect(() => {\n        document.getElementById('route-overlay').style.display = 'none';\n    }, []);\n\n    useEffect(() => {\n        fetchDetails();\n    }, [currentPage])\n    return (\n    <>\n        <WrapperHeader \n            heading='Exams'\n            component={\n                <div className='flex-row jc-e'>\n                    {\n                        examDetails.length > 0 ? \n                        <>\n                            <button id='add-section-btn' className='btn btn-primary btn-small ml-10' onClick={addSection}>\n                                <i className='fas fa-plus mr-5'></i>\n                                Add Section\n                            </button>\n                            <button className='btn btn-secondary btn-small ml-10' onClick={viewSections}>\n                                <i className='fas fa-box mr-5'></i>\n                                View Sections\n                            </button>\n                            <button className='btn btn-tertiary btn-small ml-10' onClick={editExam}>\n                                <i className='fas fa-pen mr-5'></i>\n                                Edit\n                            </button>\n                            <button className='btn btn-danger btn-small ml-10' onClick={showDeleteExamDialog}>\n                                <i className='fas fa-trash mr-5'></i>\n                                Delete\n                            </button>\n                        </>\n                        : ''\n                    }\n                    {\n                        examDetails.length == 0 &&\n                        <div>\n                            <button className='btn btn-primary btn-small' onClick={createExam}>\n                                <i className='fas fa-plus mr-5'></i>\n                                Create Exam\n                            </button>\n                        </div>\n                    }\n                </div>\n            }\n        />\n        <div className='content-loaded'>\n            <div>\n                {\n                    !examDetails.length && <div className='primary'>\n                        <ul style={{\"listStyle\":\"decimal\", \"marginLeft\":\"20px\"}}>\n                            <li>Create a Exam.</li>\n                            <li>Add Section in exam.</li>\n                            <li>Choose question from templates.</li>\n                            <li>Add Question in sections.</li>\n                        </ul>\n                    </div>\n                }\n                { !load && <Loader /> }\n                { load && examDetails.length > 0 &&\n                    <div className='table-container'>\n                        <table>\n                            <thead>\n                                <tr>\n                                    <th>S No.</th>\n                                    <th>Exam Title</th>\n                                    <th>Visibility</th>\n                                    <th>Start Time</th>\n                                    <th>Section <br/> Navigation</th>\n                                    <th>Exam Timer</th>\n                                    <th>Time Duration</th>\n                                    <th>Status</th>\n                                    <th>Created On</th>\n                                    <th className='select-exam-radio-container'>Select</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n\n                                {\n                                    examDetails.map((d, k) => {\n                                        return <ExamTableRow \n                                            examId={d.examId}\n                                            serialNo={d.serialNo}\n                                            title={d.title}\n                                            visibility={d.private}\n                                            startTime={d.startTime}\n                                            status={d.isActive}\n                                            createdOn={d.timestamp}\n                                            sectionNavigation={d.sectionNavigation}\n                                            examTimer={d.setEntireExamTimer}\n                                            timeDuration={d.timeDuration}\n                                            fetchDetails={fetchDetails}\n                                        />\n                                    })\n                                }\n                            </tbody>\n                        </table>\n                    </div>\n                }\n                <div className='exam-page-navigation-btns-padding'></div>\n            </div>\n        </div>\n        <ConfirmationDialogWithInput \n            operation={deleteExam}\n        />\n        {\n            load2 && <Sections \n                        sections={sectionDetails} \n                        examTitle={examTitle} \n                        />\n        }\n        {\n            !load2 && <Loader />\n        }\n        <WrapperFooter\n            heading=''\n            render={\n                examDetails.length > 0 && \n                <div className='flex-row jc-sb flex-full'>\n                    {\n                        currentPage > 1 && \n                        <button id=\"prev-btn\" className='btn btn-dark btn-small' onClick={prevPage}>Previous</button>\n                    }\n                    {\n                        currentPage == 1 &&\n                        <div></div>\n                    }\n\n                    <div className='btn btn-dark btn-small ml-10'>{currentPage + '/' + totalPages}</div>\n                    {\n                        currentPage < totalPages && \n                        <button id=\"next-btn\" className='btn btn-primary btn-small' onClick={nextPage}>Next</button>\n                    }\n                    {\n                        currentPage\n                    }\n                </div>\n            }\n        />\n    </>\n    );\n}\n\nexport default ViewExams;\n"]},"metadata":{},"sourceType":"module"}